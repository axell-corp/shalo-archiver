# auth-test

暗号化動作の確認のための実験用プログラムです。
SHALO AUTH 内に 2048bit RSA 鍵を生成し、AES-GCM と組み合わせてランダム文字列を暗号化・復号します。

大まかな処理の流れは以下の通りです。

1. SHALO AUTH 用の PKCS#11 モジュールを読み込む
2. トークン内の乱数生成器を用いて、ランダムな文字列を生成する
3. Windows の CNG を用いて 2048bit RSA 鍵を生成し、トークンに保存する
4. トークン内の乱数生成器を用いて 256bit AES 鍵を生成し、CNG を用いて文字列を暗号化する
5. トークンを用いて AES の鍵を RSA で暗号化し、IV や nonce などの情報と共に保持する
6. 暗号化された AES の鍵を取り出し、トークンを用いて RSA で復号する
7. 復号された AES の鍵やその他の情報を用いて、文字列を AES で復号する

ビルド時に必要な環境変数は以下の通りです。
- `ALGSHARED`：algo-shared コードへのパス。
- `BOOSTROOT`：Boost ライブラリへのパス。
	- Boost のバージョンは 1.78 を使っています。そうでないバージョンのものを使う場合は適宜インクルードディレクトリやライブラリディレクトリを書き換えてください。

動作に必要なものは以下の通りです。
- SHALO AUTH 用の PKCS#11 モジュール（`slpkcs11-vc.dll`）
	- マニュアルにしたがって、`~\shalo_pkcs11\x64\` に置いてください。
